# Client- side Basic

### Same Origin Policy(SOP)

- 자바스크립트를 이용해 페이지 내에 있는 요소들을 관리하는 방식의 공격으로부터 웹 브라우저가 사용자를 보호하기 위해 SOP 정책을 만듦
  - SOP - 서로 다른 오리진의 문서 또는 스크립트 들의 상호 작용을 제한하기 위함
  - 오리진 - 프로토콜, 포트, 호스트로 구성되고 구성 요소가 모두 일치해야 동일한 오리진이라고 할수 있다

### Cross Origin Resource Sharing(CORS)

- 일반적으로는 SOP 떄문에 서로 다른 오리진들이 리소스를 공유하지 못하지만 다른 오리진들과 리소스를 공유해야하는 상황을 위해 SOP가 적용된 상태에서도 리소스를 공유하는 방법이 존재한다
  - postMessage- 메시지를 주고받기 위한 이벤트 핸들러를 이용해 리소스를 공유
  - JSONP- 스크립트 태그를 통해 외부 자바스크립트 코드를 호출하면 현재 오리진에서 해당 코드가 실행된다는 점을 이용한 방법
  - Cross Origin Resource Sharing- 다른 오리진이 허용하는 설정 등을 HTTP 헤더를 통해 확인 한 후 허용하는 요청을 보내 리소스를 공유하는 방식

### 클라이언트 사이드 취약점

- Cross Site Scripting(XSS) - 공격자의 입력값이 크로스 사이트의 자바스크립트 일부로 웹 브라우저에서 실행되는 취약점. 실행된 스크립트는 해당 사이트의 일부가 되어 SOP 제약 없이 사이트의 구조를 변경하거나 임의 HTTP 요청을 보낼 수 있음
- Cross Site Request Forgery(CSRF)- 비정상적으로 사용자의 의도와 무관하게 HTTP 요청을 보내는 것
- Open Redirect- Redirect 기능을 악용해 피싱사이트로 접속을 유도하거나, 다른 취약점을 연계하여 사용자를 공격할 수 있음
- Click Hijacking- 공격자가 생성한 버튼, 이미지와 같은 엘리먼트를 정상적인 iframe 위에 겹쳐 올려 UI를 스푸핑해 사용자 의도와는 다른 작업을 수행하게 하는 취약점

# 2.Cross Site Scripting

- 서버의 응답에 공격자가 삽입된 악성 스크립트를 받은 사용자의 웹 브라우저에서 악성 스크립트가 실행되는 취양점을 XSS 이라고 함
- XSS 공격을 성공적으로 수행하기 위해서는 아래의 2가지 조건이 필요함
  1. 입력 데이터에 대한 충분한 검증 과정이 없어야 함
  2. 서버의 응답 데이터가 웹 브라우저 내 페이지에 출력 시 충분한 검증 과정이 없어야 함

### XSS with Javascript

- 자바스크립트는 UI적인 측면 외에도 사용자와의 상호작용 없이 사용자의 권한으로 정보를 조회하거나 변경하는 등의 요청을 주고 응답받는 것도 가능

### Stored XSS

- 악성 스크립트가 서버 내에 존재하는 데이터베이스 또는 파일 등의 형태로 저장되어 있따가 사용자가 저장된 악성 스크립트를 조회하는 순간 발생하는 형태의 XSS

### Reflected XSS 

- 악성 스크립트가 사용자의 요청 시 전송되는 형태. 사용자의 요청 데이터가 서버의 응답에 포함되는 과정에서 HTML 등의 악성 스크립트가 그대로 출력되어 발생함
- Stored XSS와 다르게 사용자의 요청 데이터에 의해 취약점이 발생하기 때문에 변조된 데이터가 사용자의 요청으로 전송되는 형태를 유도해야 함



### Server-side Mitigations

- XSS를 유발할 수 있는 태그 삽입을 방지하기 위해 서버 단에서 검증하는 방법

### HTTPOnly Flag

- 서버 측에서 응답 헤더에 Set-Cookie 헤더를 전송해 쿠키를 생성할 때 옵션으로 설정 가능하며 자바스크립트에서 해당 쿠키에 접근 하는 것을 금지함

### Content Security Policy(CSP)

- 응답 헤더나 meta 태그를 통해 각각의 지시어를 적용하여 사이트에서  로드하는 리소스들의 출저를 제한할 수 있음

### X-XSS-Protection header

- 웹 브라우저에 내장된 XSS Filter를 활성화할 것인지를 설정함. XSS Filter는 웹 브라우저에서 전송된 Request값이 XSS 공격 코드와 유사하게 생겼고, Response에 해당 공격 코드가 포함되었을 경우에 XSS 공격이 수행되었다고 판단하여 XSS 공격이 발생했음을 유저에게 알리고 차단함.